import fs from 'fs'

class FactoryHealth {
    configure(factoryConfigure) {
        if (factoryConfigure.isValid()) {
            let healtCheckModel = factoryConfigure.get();
            if (healtCheckModel.tracer && Object.keys(healtCheckModel.tracer).length > 0) {
                for (tracer in healtCheckModel.tracer) {
                    this.mapTracerModel[tracer.name] = tracer;
                }
            }
        }
    }

}

function initializeDriver() {
    console.log(__dirname + '/../driver');
    var folder = __dirname + '/../driver';

    fs.readdir(folder, function (err, files) {
        console.log(files)
        files.forEach(function (file) {
            if (".js".indexOf(file)) {
                var driver = folder + '/' + file;
                import(driver).then((value) => {
                    console.log(new value.default().execute);
                }).catch(function (error) {
                    console.log("Failed to load module ".concat(driver));
                });
            }
        });
    });
}

initializeDriver();
